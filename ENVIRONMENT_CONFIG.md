# Environment Configuration Guide

ูุฐุง ุงูููู ูุดุฑุญ ููููุฉ ุชูููู ูุชุบูุฑุงุช ูู ุจูุฆุฉ.

## ๐ ูุชุบูุฑุงุช ูุดุชุฑูุฉ ูู ุฌููุน ุงูุจูุฆุงุช

### Project Variables
```hcl
project = "multi-env-devops-platform"  # ุงุณู ุงููุดุฑูุน
region  = "us-east-1"                  # ููุทูุฉ AWS
env     = "dev|staging|prod"           # ุงูุจูุฆุฉ ุงูุญุงููุฉ
```

## ๐๏ธ ูุชุบูุฑุงุช VPC (ุงูุดุจูุฉ ุงูุงูุชุฑุงุถูุฉ)

| ุงููุชุบูุฑ | ุงููุตู | ูุซุงู |
|---------|-------|------|
| `vpc_cidr` | ูุทุงู IP ููุดุจูุฉ ุงูุงูุชุฑุงุถูุฉ | `10.0.0.0/16` |
| `public_subnets` | ูุงุฆูุฉ ูุทุงูุงุช ุงูู subnets ุงูุนุงู | `["10.0.1.0/24", "10.0.2.0/24"]` |
| `private_subnets` | ูุงุฆูุฉ ูุทุงูุงุช ุงูู subnets ุงูุฎุงุต | `["10.0.11.0/24", "10.0.12.0/24"]` |

### ููุงุญุธุงุช ูุงูุฉ:
- ูู ุจูุฆุฉ ููุง ูุทุงู IP ุฎุงุต ุจูุง ูุชุฌูุจ ุงูุชุถุงุฑุจ
- Public subnets ูุชู ูุถุน NAT Gateway ูููุง
- Private subnets ูุชู ูุถุน EKS Nodes ูููุง

## โธ๏ธ ูุชุบูุฑุงุช EKS (Kubernetes)

| ุงููุชุบูุฑ | ุงููุตู | Dev | Staging | Prod |
|---------|-------|-----|---------|------|
| `kubernetes_version` | ุฅุตุฏุงุฑ Kubernetes | 1.29 | 1.29 | 1.29 |
| `instance_types` | ููุน ุงููุซููุงุช EC2 | t3.small | t3.medium | t3.large |
| `desired_size` | ุนุฏุฏ ุงูุนูุฏ ุงููุทููุจ | 1 | 2 | 3 |
| `min_size` | ุงูุญุฏ ุงูุฃุฏูู ููุนูุฏ | 1 | 2 | 3 |
| `max_size` | ุงูุญุฏ ุงูุฃูุตู ููุนูุฏ | 2 | 4 | 6 |
| `disk_size` | ุญุฌู ุงูุชุฎุฒูู (GB) | 30 | 50 | 100 |

### ุฃูุซูุฉ ุญุณุจ ุงูุจูุฆุฉ:

#### Development
```hcl
kubernetes_version = "1.29"
instance_types     = ["t3.small"]
desired_size       = 1
min_size          = 1
max_size          = 2
disk_size         = 30
```

#### Staging
```hcl
kubernetes_version = "1.29"
instance_types     = ["t3.medium"]
desired_size       = 2
min_size          = 2
max_size          = 4
disk_size         = 50
```

#### Production
```hcl
kubernetes_version = "1.29"
instance_types     = ["t3.large"]
desired_size       = 3
min_size          = 3
max_size          = 6
disk_size         = 100
```

## ๐ณ ุชูุฏูุฑ ุงูุชูุงููู

### ุชูุงููู EC2 (ุดูุฑูุงู)

#### Dev (t3.small)
- ุงูุณุนุฑ: ~$0.0234/ุณุงุนุฉ
- ุนุฏุฏ ุงูุนูุฏ: 1
- ุงูุชูููุฉ ุงูุดูุฑูุฉ: ~$17

#### Staging (t3.medium)
- ุงูุณุนุฑ: ~$0.0468/ุณุงุนุฉ
- ุนุฏุฏ ุงูุนูุฏ: 2
- ุงูุชูููุฉ ุงูุดูุฑูุฉ: ~$67

#### Production (t3.large)
- ุงูุณุนุฑ: ~$0.0936/ุณุงุนุฉ
- ุนุฏุฏ ุงูุนูุฏ: 3
- ุงูุชูููุฉ ุงูุดูุฑูุฉ: ~$202

### ุฑุณูู EKS (ุซุงุจุชุฉ)
- ุฑุณู ุงููุฌููุนุฉ: $73/ุดูุฑ ููู ูุฌููุนุฉ
- ุนุฏุฏ ุงููุฌููุนุงุช: 3
- ุฅุฌูุงูู ุฑุณูู EKS: $219/ุดูุฑ

### ุงูุชูุงููู ุงูุฅุถุงููุฉ:
- NAT Gateway: ~$32/ุดูุฑ ููู ูุงุญุฏ (ุฅุฐุง ูุงู ูุณุชุฎุฏูุงู)
- Data Transfer: ุญุณุจ ุงูุงุณุชุฎุฏุงู
- ECR Storage: ~$0.10 ููู GB

**ุงูุฅุฌูุงูู ุงูุชูุฑูุจู: $500-700/ุดูุฑ**

## ๐ ููููุฉ ุชุบููุฑ ุงููุชุบูุฑุงุช

### ุงูุทุฑููุฉ 1: ุชุนุฏูู terraform.tfvars
```bash
cd infra/envs/dev
vim terraform.tfvars
# ุนุฏู ุงูููู
terraform plan
terraform apply
```

### ุงูุทุฑููุฉ 2: ุงุณุชุฎุฏุงู command line
```bash
terraform apply -var="desired_size=3"
```

### ุงูุทุฑููุฉ 3: ููู ูุชุบูุฑุงุช ุฎุงุต
```bash
terraform apply -var-file="prod.tfvars"
```

## โ๏ธ ุชุญุฐูุฑุงุช ูููุฉ

1. **ุชุฌูุจ ุชูููู `min_size`**: ูุฏ ูุคุฏู ุฅูู ุฎุณุงุฑุฉ ุงูุชุทุจููุงุช
2. **ุชุญุฏูุซ `kubernetes_version`** ุจุญุฐุฑ: ุงุฎุชุจุฑ ูู Dev ุฃููุงู
3. **ุนุฏู ุญุฐู `private_subnets`**: ูุฏ ูุคุซุฑ ุนูู ุงูู Nodes ุงูููุฌูุฏุฉ
4. **ุชุฑููุฉ Instance Types**: ูุฏ ุชุญุชุงุฌ ุฅูู ุฅุนุงุฏุฉ ุฅุทูุงู ุงูู Nodes

## ๐ ูุซุงู: Scaling Production

```bash
cd infra/envs/prod

# ูุจู:
# desired_size = 3, max_size = 6

# ุชุนุฏูู terraform.tfvars
vim terraform.tfvars
# ุบูุฑ:
# desired_size = 5
# max_size = 8

# ุชุทุจูู ุงูุชุบููุฑ
terraform plan -out=prod.tfplan
terraform apply prod.tfplan

# ุงูุชุญูู
kubectl get nodes
kubectl top nodes
```

## ๐ ููุฎุต ุงูุจูุฆุงุช

### Development (ููุงุฎุชุจุงุฑ ูุงูุชุทููุฑ)
- ุงูุญุฏ ุงูุฃุฏูู ูู ุงูููุงุฑุฏ
- ุงูุชูููุฉ: ููุฎูุถุฉ
- ุงูุฃุฏุงุก: ูุงูู ููุงุฎุชุจุงุฑ

### Staging (ููุชุญูู ูุจู Production)
- ููุงุฑุฏ ูุชูุณุทุฉ
- ุงูุชูููุฉ: ูุนุชุฏูุฉ
- ุงูุฃุฏุงุก: ูุฑูุจ ูู Production

### Production (ููุนููุงุก ุงููุนูููู)
- ููุงุฑุฏ ุนุงููุฉ
- ุงูุชูููุฉ: ุฃุนูู
- ุงูุฃุฏุงุก: ุฃุนูู ุชููุฑุงู ูุงุณุชูุฑุงุฑุงู

---

**ุขุฎุฑ ุชุญุฏูุซ**: ููููุจุฑ 2025
